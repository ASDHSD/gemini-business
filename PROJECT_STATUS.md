# Gemini Business é¡¹ç›®æ”¹è¿›æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°
å°†ç”¨æˆ·è‡ªå®šä¹‰è„šæœ¬ (`gemini bussisn.py`, `refresh_gemini_accounts.py`) çš„åŠŸèƒ½æ•´åˆåˆ° `gemini-business` ä¸»é¡¹ç›®ä¸­ã€‚

---

## å·²å®Œæˆçš„æ”¹è¿›

### 1. é‚®ç®± API å…¼å®¹å±‚
**æ–‡ä»¶**: `util/gemini_auth_utils.py`

- æ”¯æŒ `/api/generate-email` ç«¯ç‚¹ï¼ˆè‡ªåŠ¨ç”Ÿæˆé‚®ç®±ï¼Œæ— éœ€é…ç½®åŸŸåï¼‰
- æ”¯æŒ `/api/emails` è·å–é‚®ä»¶å¹¶è§£æ HTML æå–éªŒè¯ç 
- å…¼å®¹ `X-API-Key` è®¤è¯æ–¹å¼

### 2. å¢å¼ºéªŒè¯ç è¾“å…¥
**æ–‡ä»¶**: `util/gemini_auth_utils.py`

- æ”¯æŒ 6 æ ¼åˆ†ç¦»è¾“å…¥ã€å•æ ¼è¾“å…¥ã€OTP å®¹å™¨ä¸‰ç§æ¨¡å¼
- `disable_resend_buttons()` é˜²æ­¢è¯¯è§¦é‡æ–°å‘é€
- JS æ³¨å…¥å…œåº•èµ‹å€¼æœºåˆ¶

### 3. è¶…æ—¶ä¿æŠ¤
**æ–‡ä»¶**: `core/login_service.py`, `core/register_service.py`

| æ“ä½œ | è¶…æ—¶æ—¶é—´ |
| ---- | -------- |
| åˆ·æ–° | 60 ç§’    |
| æ³¨å†Œ | 90 ç§’    |

è¶…æ—¶åæ—¥å¿—æ ‡è®°ï¼š`ğŸ”´ [TIMEOUT]`, `ğŸ”´ [VERIFY_FAIL]`, `ğŸ”´ [EXTRACT_FAIL]`

### 4. JSON è´¦æˆ·å¯¼å…¥ API
**æ–‡ä»¶**: `main.py`

| ç«¯ç‚¹                          | æ–¹æ³• | ç”¨é€”           |
| ----------------------------- | ---- | -------------- |
| `/admin/accounts/upload`      | POST | ä¸Šä¼  JSON æ–‡ä»¶ |
| `/admin/accounts/upload-json` | POST | è„šæœ¬è‡ªåŠ¨åŒæ­¥   |

---

## å¦‚ä½•è¿è¡Œ

### æœ¬åœ°è¿è¡Œ
```powershell
cd "d:\fun project\gemini buss\gemini-business"
$env:ADMIN_KEY='ä½ çš„ç®¡ç†å¯†é’¥'; python main.py
```

### Docker éƒ¨ç½²
```bash
docker build -t gemini-business .
docker run -e ADMIN_KEY=ä½ çš„å¯†é’¥ -p 7860:7860 gemini-business
```

---

## é…ç½®è¯´æ˜

### å¿…å¡«é…ç½®
| é…ç½®é¡¹    | è®¾ç½®æ–¹å¼ | ç¤ºä¾‹      |
| --------- | -------- | --------- |
| ADMIN_KEY | ç¯å¢ƒå˜é‡ | `test123` |

### å¯é€‰é…ç½®ï¼ˆç³»ç»Ÿè®¾ç½®é¡µé¢ï¼‰
| é…ç½®é¡¹         | è¯´æ˜                          |
| -------------- | ----------------------------- |
| é‚®ç®± API åœ°å€  | `https://mail.chatgpt.org.uk` |
| é‚®ç®±ç®¡ç†å‘˜å¯†é’¥ | `gpt-test`                    |
| é‚®ç®±åŸŸååˆ—è¡¨   | **å¯ç•™ç©º**ï¼ˆAPI è‡ªåŠ¨ç”Ÿæˆï¼‰    |

---

## è´¦æˆ·æ–‡ä»¶æ ¼å¼
```json
{
  "id": "xxx@domain.com",
  "csesidx": "123456",
  "config_id": "uuid",
  "secure_c_ses": "CSE.xxx",
  "host_c_oses": "COS.xxx",
  "expires_at": "2026-01-15 08:00:00"
}
```

---

## æ–‡ä»¶ä¿®æ”¹æ¸…å•

| æ–‡ä»¶                        | ä¿®æ”¹å†…å®¹                            |
| --------------------------- | ----------------------------------- |
| `util/gemini_auth_utils.py` | å®Œå…¨é‡å†™ï¼Œæ•´åˆé‚®ç®± API + éªŒè¯ç é€»è¾‘ |
| `core/login_service.py`     | æ·»åŠ  60s è¶…æ—¶ + çº¢è‰²å‘Šè­¦            |
| `core/register_service.py`  | æ·»åŠ  90s è¶…æ—¶ + çº¢è‰²å‘Šè­¦            |
| `main.py`                   | æ–°å¢ JSON ä¸Šä¼  API ç«¯ç‚¹             |

---

## å½“å‰çŠ¶æ€

âœ… **å·²å®Œæˆ**
- é‚®ç®± API å…¼å®¹
- éªŒè¯ç è¾“å…¥å¢å¼º
- è¶…æ—¶ä¿æŠ¤
- JSON å¯¼å…¥ API
- æœ¬åœ°æµ‹è¯•é€šè¿‡

â³ **å¾…æµ‹è¯•**
- Docker éƒ¨ç½²åçš„æ³¨å†ŒåŠŸèƒ½
- è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼ˆéœ€ç­‰å¾…è´¦æˆ·æ¥è¿‘è¿‡æœŸï¼‰

---

## ç”¨æˆ·è„šæœ¬åŒæ­¥ç¤ºä¾‹

åœ¨ `gemini bussisn.py` æ³¨å†ŒæˆåŠŸåæ·»åŠ ï¼š
```python
requests.post(
    f"{SERVER_URL}/admin/accounts/upload-json",
    json=[account_data]
)
```
